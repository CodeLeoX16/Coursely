<nav class="navbar navbar-expand-md site-nav border-bottom shadow-sm sticky-top py-2">
  <div class="container-fluid">
    <a class="navbar-brand brand d-flex align-items-center fs-3" href="/listings" style="letter-spacing:2px;">
      <i class="fa-regular fa-compass me-2 brand-icon"></i>
      <span class="brand-text">Coursely</span>
    </a>
    <button class="navbar-toggler border-0 shadow-none" type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNavAltMarkup">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav d-flex align-items-center">
        <a class="nav-link px-4 fw-semibold text-dark hover-nav d-flex align-items-center" href="/listings">
          <i class="fa fa-list me-1 text-success"></i>
          <span><b>Explore</b></span>
        </a>
      </div>
      <!-- Responsive search form -->
      <form class="d-flex mx-auto my-2 my-md-0 w-100 justify-content-center" role="search" action="/listings" method="GET" style="max-width: 480px;">
        <input name="search" class="form-control me-2 search-input" type="search" placeholder="Search courses" value="<%= typeof search !== 'undefined' ? search : '' %>">
        <button class="btn btn-search" type="submit"><i class="fa-solid fa-magnifying-glass me-2"></i>Search</button>
      </form>
      <!-- End search form -->
      <div class="navbar-nav ms-auto align-items-center mt-2 mt-md-0">
        <!-- Contact via WhatsApp: replace the phone number below with your full international number (no +). -->
        <a class="nav-link px-2 mb-2 mb-md-0" href="https://wa.me/919907876770?text=Hi%20I%20need%20support" target="_blank" rel="noopener noreferrer">
          <button class="btn-whatsapp" type="button"><i class="fab fa-whatsapp"></i> Contact Us</button>
        </a>
        <% if (currentUser && currentUser.role === 'admin') { %>
        <a class="nav-link px-4 fw-semibold text-white d-flex align-items-center mb-2 mb-md-0" href="/listings/new">
          <button class="btn btn-gradient-primary rounded-pill px-3 py-2 me-2">
            <i class="fa fa-plus-circle me-2"></i> Add Course
          </button>
        </a>
        <% } %>
        <% if (!currentUser) { %>
          <a class="nav-link px-4 fw-semibold text-dark hover-nav mb-2 mb-md-0" href="/signup">
            <i class="fa fa-user-plus me-1 text-info"></i><b>Sign Up</b>
          </a>
          <a class="nav-link px-4 fw-semibold text-dark hover-nav mb-2 mb-md-0" href="/login">
            <i class="fa fa-sign-in-alt me-1 text-primary"></i><b>Login</b>
          </a>
        <% } else { %>
          <span class="nav-link px-4 fw-semibold text-success fs-5 d-flex align-items-center mb-2 mb-md-0 user-badge">
            <i class="fa fa-user-circle me-2 fa-lg text-primary"></i>
            <span style="font-weight:600;">Hey, <span class="text-primary"><%= currentUser.username %></span></span>
          </span>
          <a class="nav-link px-4 fw-semibold text-danger hover-nav mb-2 mb-md-0" href="/logout">
            <i class="fa fa-sign-out-alt me-1"></i><b>Logout</b>
          </a>
        <% } %>
      </div>
    </div>
  </div>
</nav>
