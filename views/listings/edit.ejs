<% layout('layouts/boilerplate') %>

<div class="row">
    <div class="col-8 offset-2">
        <div class="container mt-5 p-4 border rounded shadow-sm" style="background: #fff; padding-bottom: 6rem;">
            <div class="text-center mb-4">
                <h2 style="font-weight: bold; color: #222;">‚úèÔ∏è Edit Course ‚úèÔ∏è</h2>
                <p class="text-muted mb-0">Update your course details below</p>
            </div>

            <form action="/listings/<%= listing._id %>?_method=PUT" method="POST" novalidate class="needs-validation">

                <!-- Title -->
                <div class="mb-3">
                    <label class="form-label"><b>Course Title</b></label>
                    <input 
                        type="text"
                        name="listing[title]"
                        value="<%= listing.title %>"
                        class="form-control"
                        required
                    />
                    <div class="valid-feedback">Looks good</div>
                </div>

                <!-- Description -->
                <div class="mb-3">
                    <label class="form-label"><b>Course Description</b></label>
                    <textarea
                        name="listing[description]"
                        class="form-control"
                        rows="4"
                        required
                    ><%= listing.description %></textarea>
                    <div class="invalid-feedback">Please enter a description</div>
                </div>

                <!-- Thumbnail -->
                <div class="mb-3">
                    <label class="form-label"><b>Thumbnail URL</b></label>
                    <input
                        type="url"
                        name="listing[thumbnail]"
                        value="<%= listing.thumbnail %>"
                        class="form-control"
                    />
                    <% if (listing.thumbnail) { %>
                        <div class="text-center mt-2">
                            <img src="<%= listing.thumbnail %>" width="200" style="border-radius:8px;">
                        </div>
                    <% } %>
                </div>

                <!-- Course Website -->
                <div class="mb-3">
                    <label class="form-label"><b>Course Website URL</b></label>
                    <input
                        type="url"
                        name="listing[url]"
                        value="<%= listing.url %>"
                        class="form-control"
                        pattern="https?://.+"
                    />
                </div>

                <!-- Fee & Category -->
                <div class="row">
                    <div class="mb-3 col-md-4">
                        <label class="form-label"><b>Fee</b> üí∞</label>
                        <input
                            type="number"
                            name="listing[fee]"
                            value="<%= listing.fee %>"
                            class="form-control"
                            min="0"
                            step="0.01"
                            required
                        />
                        <div class="invalid-feedback">Enter a valid fee</div>
                    </div>

                    <div class="mb-3 col-md-8">
                        <label class="form-label"><b>Category</b> üè∑Ô∏è</label>
                        <input
                            type="text"
                            name="listing[category]"
                            value="<%= listing.category %>"
                            class="form-control"
                            required
                        />
                        <div class="invalid-feedback">Enter a category</div>
                    </div>
                </div>

                <!-- Duration -->
                <div class="mb-3">
                    <label class="form-label"><b>Duration</b> ‚è±Ô∏è</label>
                    <input
                        type="text"
                        name="listing[duration]"
                        value="<%= listing.duration %>"
                        class="form-control"
                        required
                    />
                    <div class="invalid-feedback">Provide course duration</div>
                </div>

                <!-- Instructor -->
                <div class="mb-3">
                    <label class="form-label"><b>Instructor</b></label>
                    <input
                        type="text"
                        name="listing[instructor]"
                        value="<%= listing.instructor %>"
                        class="form-control"
                    />
                </div>

                <!-- Submit -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-dark px-4 py-2" style="border-radius:25px;">
                        üíæ Save Changes
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>
